---
title: IPv4地址概述
data: 2022-09-30 11:25
tags: 
- tech
- 计算机网络
- IPv4地址概述
---

# IPv4概述

## 分类编址

分类编址的IPv4地址分为五类：A类、B类、C类、D类和E类

![image-20220930145432959](./img/image-20220930145432959.png)

**注：**

+ 只有A类、B类和C类地址可分配给网络中的主机或路由器的各接口
+ 主机号为 **”全0“** 的地址是网络地址，不能分配给主机或路由器的各接口
+ 主机号为 **“全1”** 的地址是广播地址，不能分配给主机或路由器的各接口

---

### A类地址：

**前8位为网络号，且第一位为0**

![image-20220930150151133](./img/image-20220930150151133.png)

**注意：**

+ **最小网络号0**，**保留不指派**
+ 地址 **0.0.0.0** 是一个**特殊的IPv4地址**，**只能作为源地址**使用，表示 **“在本网络上的本主机”**。封装有DHCP Discovery 报文的IP分组的源地址使用 0.0.0.0
+ 第一个可指派的网络号为1，网络地址为1.0.0.0
+ 最大网络号127，作为**本地软件环回测试地址**，不指派
  + 最小的本地软件环回测试地址为127.0.0.1
  + 最大的本地软件环回测试地址为127.255.255.254
+ **最后一个可指派的网络号**为**126**，网络号为126.0.0.0
+ 可**指派的网络数量**为2^(8-1) - 2 = 126（**减2的原因是出去最小网络号和最大网络号127**）
+ 每个网络中**可分配的IP地址数量**为 2^24 - 2 = 16777214（**减2的原因是除去主机号为全0的网络地址和全1的广播地址**）

----

### B类地址：

**前16位作为网络号，且第一、第二位为 10**

![image-20220930151302292](./img/image-20220930151302292.png)

**注意：**

+ 最小网络号也是第一个可指派的网络号 **128.0**，网络地址为**128.0**.0.0
+ 最大网络号也是最后一个可指派的网络号**191.255**，网络地址为**191.255**.0.0
+ **可指派的网络数量**为 2^(16-2) = 16384
+ 每个**网络中可分配的IP地址数量**为 2^16 - 2 = 65534 （**减2的原因是除去主机号为全0的网络地址和全1的广播地址**）

---

### C类地址：

**前24位作为网络号，且第一、二、三位为 110**

![image-20220930151937374](./img/image-20220930151937374.png)

**注意：**

+ 最小网络号也是第一个可指派的网络号 **192.0.0**，网络地址为**192.0.0**.0
+ 最大网络号也是最后一个可指派的网络号 **223.255.255**，网络地址为 **223.255.255**.0
+ **可指派的网络数量**为 2^(24 - 3) = 2097152
+ **每个网络中可分配的IP地址数量**为 2^8 - 2 = 254（**减2的原因是除去主机号为全0的网络地址和全1的广播地址**）

---

<!-- more -->

### 网络地址转换：

**为了网络安全，划出了部分IP地址为私有 IP地址。私有 IP地址只用于LAN(局域网)，不用于WAN(广域网)**

**私有 IP地址不能直接用于 Internet，必须通过网关利用 NAT把私有 IP地址转换为 Internet中合法的全球 IP地址后才能用于Internet，并且允许私有 IP地址被LAN重复使用，有效解决了 IP地址不足的问题，即现在计算机一般都会使用NAT转换服务**

**A类：**1个A类网段，即 **10.**0.0.0 ~ **10.**255.255.255

**B类：**16个B类网段，即 **172.16**.0.0 ~ **172.31**.255.255

**C类：**256个C类网段，即 **192.168.0**.0 ~ **192.168.255**.255

**典型的 NAT地址转换表如下：**

![image-20220930154130366](./img/image-20220930154130366.png)

---

## 划分子网

可以从**IP地址的主机号部分**中**借用一些位作为子网号**来区分不同的子网

这样就可以在分配到的网络中再分配出多个小的子网，而不用申请新的网络号

**32比特的子网掩码可以表明分类IP地址的主机号部分被借用了几个比特作为子网号**

+ 子网掩码使用**连续的比特1来对应网络号和子网号**
+ 子网掩码使用**连续的比特0来对应主机号**
+ 将划分子网的**IPv4地址**与其相应的**子网掩码**进行**逻辑与运算**就可以得到IPv4地址所在**子网的网络地址**

![image-20221008182742965](./img/image-20221008182742965.png)

可以借用子网掩码这个工具来区分子网，地址由网络号、子网号和主机号组成

![image-20221008183751086](./img/image-20221008183751086.png)

![image-20221008185831103](./img/image-20221008185831103.png)

**默认的子网掩码：默认的子网掩码**是指**在未划分子网的情况下使用的子网掩码**

![image-20221008190128279](./img/image-20221008190128279.png)

## 无分类编址（CIDR）

+ **CIDR消除了传统的A类、B类和C类地址，以及划分子网的概念**

+ **CIDR可以更加有效地分配IPv4的地址空间**，并且可以在新的IPv6使用之前允许因特网的规模继续增长

+ CIDR使用“**斜线记法**”，或称CIDR记法。即在IPv4地址后面加上斜线“/”，在**斜线后面写上网络前缀所占的比特数量**

  ![image-20221008200752761](./img/image-20221008200752761.png)

+ CIDR实际上是将**网络前缀都相同的连续的IP地址组成一个“CIDR地址块”**

+ 我们只要知道CIDR地址块中的任何一个地址，就可以知道该地址块的全部细节

  + 地址块中的最小地址

  + 地址块中的最大地址

  + 地址块中的地址数量

  + 地址块聚合某类网络（A类、B类和C类）的数量

  + 地址掩码（也可继续称为子网掩码）

    ![image-20221008201240233](./img/image-20221008201240233.png)

### 路由聚合（构造超网）

找目的网络地址中的共同前缀来构成超网，以减少路由表中的条目数

+ **网络前缀越长，地址块越小，路由越具体**；

+ 若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为**最长前缀匹配**，

  因为这样的路由更具体。

![image-20221008201914458](./img/image-20221008201914458.png)

**注：**把需要聚合的各个网络的网络前缀写出来，找出最长的相同的网络器前缀聚合成一个网络。

---

## 参考：湖科大教书匠：https://www.bilibili.com/video/BV1c4411d7jb/?spm_id_from=333.999.0.0&vd_source=e8dabb7e7d08d095b938c58a3b51a693